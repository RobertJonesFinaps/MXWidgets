{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/robertjones/Documents/Finaps/TestMarketplace-main/widgets.sources/scrollToContent/src/ScrollToContent.jsx","webpack:///external \"react\"","webpack:///external \"react-native\""],"names":["ScrollToContent","props","scrollToContent","scrollDistance","scroller","scrollTo","x","y","onScrollHandler","event","currentPosition","nativeEvent","contentOffset","distanceArray","state","scrollDistanceArray","currentIndex","findIndex","distance","listContent","length","currentSectionLabel","sectionLabel","value","activeItem","setValue","getScrollDistance","index","i","Math","max","contentHeightDict","padItem","viewHeight","onLayoutContentHandler","joined","layout","height","setState","onLayoutViewHandler","Object","keys","push","activeItemTrigger","indexToScrollTo","item","renderContent","map","content","styles","container","style","scrollEvent","allowScroll","showScrollBar","Component","StyleSheet","create","flex"],"mappings":"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","file":"widgets/finaps/scrolltocontent/ScrollToContent.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"../../../../src/ScrollToContent.jsx\");\n","import { Component, createElement } from \"react\";\nimport { ScrollView, StyleSheet, View } from \"react-native\";\n\n/**\n * Component that allows for automatic scrolling\n *\n * Features\n * - Trigger attribute causes scroll to matching section label. Trigger is then reset.\n * - Manual scrolling is optional\n * - Padding each section can be handled in widget\n * - Variable number of sections possible\n *\n */\n\nexport class ScrollToContent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            viewHeight: 0,\n            contentHeightDict: {},\n            scrollDistanceArray: []\n        };\n    }\n\n    scrollToContent = scrollDistance => {\n        this.scroller.scrollTo({ x: 0, y: scrollDistance });\n    };\n\n    onScrollHandler = event => {\n        // called each time the user scrolls and there's an available attribute to set\n        let currentPosition = event.nativeEvent.contentOffset.y;\n        let distanceArray = this.state.scrollDistanceArray;\n        let currentIndex = distanceArray.findIndex(distance => distance >= currentPosition + 1) - 1;\n\n        if (currentIndex != -1 && currentIndex < this.props.listContent.length) {\n            // now check whether it's actually necessary to set the attribute\n            let currentSectionLabel = this.props.listContent[currentIndex].sectionLabel.value;\n            if (currentSectionLabel != this.props.activeItem.value) {\n                this.props.activeItem.setValue(currentSectionLabel);\n            }\n        }\n    };\n\n    getScrollDistance = index => {\n        // measure the height of all preceding entries\n        var scrollDistance = 0;\n        for (let i = 0; i < index; i++) {\n            scrollDistance += Math.max(\n                this.state.contentHeightDict[i],\n                this.props.listContent[i].padItem ? this.state.viewHeight : 0\n            );\n        }\n        return scrollDistance;\n    };\n\n    componentDidUpdate() {\n        if (this.props.activeItemTrigger.value != \"\") {\n            // if trigger contains something search for value scroll to it and then reset the trigger\n            let indexToScrollTo = this.props.listContent.findIndex(\n                item => item.sectionLabel.value == this.props.activeItemTrigger.value\n            );\n\n            if (indexToScrollTo !== -1) {\n                // something has been found\n                this.scrollToContent(this.getScrollDistance(indexToScrollTo));\n                this.props.activeItemTrigger.setValue(\"\"); // reset the trigger attribute\n            }\n        }\n    }\n\n    onLayoutContentHandler = (event, index) => {\n        // Sets up dict of heights for each item\n        var joined = this.state.contentHeightDict;\n\n        joined[index] = event.nativeEvent.layout.height;\n        this.setState({\n            contentHeightDict: joined\n        });\n    };\n\n    onLayoutViewHandler = event => {\n        // Gets the size of the viewport of the scrollview\n        // creates the distance array\n        this.setState({ viewHeight: event.nativeEvent.layout.height });\n\n        var joined = this.state.contentHeightDict;\n\n        if (Object.keys(joined).length === this.props.listContent.length) {\n            // Check if the dict tracking heights is full and there's an available attribute for the current position\n            // if so create the distance array\n            var distanceArray = [0];\n            for (let i = 0; i < this.props.listContent.length; i++) {\n                distanceArray.push(\n                    distanceArray[i] +\n                        (this.props.listContent[i].padItem\n                            ? Math.max(joined[i], Math.max(event.nativeEvent.layout.height))\n                            : joined[i])\n                );\n            }\n            this.setState({\n                scrollDistanceArray: distanceArray\n            });\n        }\n    };\n\n    render() {\n        let renderContent = this.props.listContent.map((item, index) => {\n            // render each item in the list\n            return (\n                <View key={3 * index}>\n                    <View\n                        key={3 * index + 1}\n                        onLayout={event => {\n                            this.onLayoutContentHandler(event, index);\n                        }}\n                    >\n                        {item.content}\n                    </View>\n                    {item.padItem && index in this.state.contentHeightDict ? (\n                        <View\n                            key={3 * index + 2}\n                            style={{\n                                height: Math.max(this.state.viewHeight - this.state.contentHeightDict[index], 0)\n                            }}\n                        />\n                    ) : null}\n                </View>\n            );\n        });\n\n        return (\n            <ScrollView\n                style={[styles.container, this.props.style[0].container]}\n                ref={scroller => {\n                    this.scroller = scroller;\n                }}\n                onScroll={\n                    this.props.activeItem\n                        ? scrollEvent => {\n                              this.onScrollHandler(scrollEvent);\n                          }\n                        : null\n                }\n                scrollEventThrottle={16}\n                onLayout={event => {\n                    this.onLayoutViewHandler(event);\n                }}\n                scrollEnabled={this.props.allowScroll}\n                showsVerticalScrollIndicator={this.props.showScrollBar}\n            >\n                {renderContent}\n            </ScrollView>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1\n    }\n});\n","module.exports = require(\"react\");","module.exports = require(\"react-native\");"],"sourceRoot":""}